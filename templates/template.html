<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <title>TarkikX</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TarkikX - A modern chat interface">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ¤–</text></svg>">
</head>
</head>

<body>
    <header>
        <div>Tarkik<span style="color:#64F079;">X</span></div>
        <form method="post" action="/reset" class="reset">
            <button type="submit" title="Reset Chat" aria-label="Reset Chat">
                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="35" height="35" viewBox="0,0,256,256">
                    <g fill="#ce3a3a" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt"
                        stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0"
                        font-family="none" font-weight="none" font-size="none" text-anchor="none"
                        style="mix-blend-mode: normal">
                        <g transform="scale(8,8)">
                            <path
                                d="M13.59375,4l-0.3125,0.28125l-0.71875,0.71875h-6.5625v2h1v18c0,1.64453 1.35547,3 3,3h12c1.64453,0 3,-1.35547 3,-3v-18h1v-2h-6.5625l-0.71875,-0.71875l-0.3125,-0.28125zM14.4375,6h3.125l0.71875,0.71875l0.3125,0.28125h4.40625v18c0,0.55469 -0.44531,1 -1,1h-12c-0.55469,0 -1,-0.44531 -1,-1v-18h4.40625l0.3125,-0.28125zM11,11v11h2v-11zM15,11v11h2v-11zM19,11v11h2v-11z">
                            </path>
                        </g>
                    </g>
                </svg>
            </button>
        </form>
    </header>
    <main>

        <div class="chat-box" id="chat-box">
            {% for msg in history %}
            <!-- User Message -->
            <div class="chat-message user-message">
                <div class="message-avatar">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 21V19C20 16.7909 18.2091 15 16 15H8C5.79086 15 4 16.7909 4 19V21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z" stroke="#64F079" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="message-content">
                    <div class="message-text">{{ msg['question'] }}</div>
                    <div class="message-time">{{ msg['timestamp'] }}</div>
                </div>
            </div>
            
            <!-- Assistant Message -->
            <div class="chat-message assistant-message">
                <div class="message-avatar">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z" stroke="#64F079" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 8V16M8 12H16" stroke="#64F079" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
                <div class="message-content">
                    <div class="message-text">{{ msg['answer']|safe }}</div>
                    <div class="message-time">{{ msg['timestamp'] }}</div>
                </div>
            </div>
            {% endfor %}
        </div>

        <form method="post" class="chat-form" id="chat-form">
            <input type="text" name="query" placeholder="Type your message..." required autofocus autocomplete="off"
                autocorrect="off" autocapitalize="off" spellcheck="false">
            <button type="submit" title="Send Message" aria-label="Send Message">
                <svg width="33" height="33" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 17L11 12L6 7M13 17L18 12L13 7" stroke="#64F079" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </button>
        </form>

    </main>

    <script src="{{ url_for('static', filename='js/app.js') }}" defer></script>
</body>
</html>
